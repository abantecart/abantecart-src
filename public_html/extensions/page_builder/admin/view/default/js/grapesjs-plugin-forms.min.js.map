{"version":3,"file":"index.js","mappings":"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","sources":["webpack://grapesjs-plugin-forms/webpack/universalModuleDefinition","webpack://grapesjs-plugin-forms/webpack/bootstrap","webpack://grapesjs-plugin-forms/webpack/runtime/define property getters","webpack://grapesjs-plugin-forms/webpack/runtime/hasOwnProperty shorthand","webpack://grapesjs-plugin-forms/webpack/runtime/make namespace object","webpack://grapesjs-plugin-forms/./src/components.ts","webpack://grapesjs-plugin-forms/./src/index.ts","webpack://grapesjs-plugin-forms/./src/traits.ts","webpack://grapesjs-plugin-forms/./src/blocks.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"grapesjs-plugin-forms\"] = factory();\n\telse\n\t\troot[\"grapesjs-plugin-forms\"] = factory();\n})(typeof globalThis !== 'undefined' ? globalThis : (typeof window !== 'undefined' ? window : this), () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import type { Editor } from 'grapesjs';\n\nexport const typeForm = 'form';\nexport const typeInput = 'input';\nexport const typeTextarea = 'textarea';\nexport const typeSelect = 'select';\nexport const typeCheckbox = 'checkbox';\nexport const typeRadio = 'radio';\nexport const typeButton = 'button';\nexport const typeLabel = 'label';\nexport const typeOption = 'option';\n\nexport default function(editor: Editor) {\n  const { Components } = editor;\n\n  const idTrait = {\n    name: 'id',\n  };\n\n  const forTrait = {\n    name: 'for',\n  };\n\n  const nameTrait = {\n    name: 'name',\n  };\n\n  const placeholderTrait = {\n    name: 'placeholder',\n  };\n\n  const valueTrait = {\n    name: 'value',\n  };\n\n  const requiredTrait = {\n    type: 'checkbox',\n    name: 'required',\n  };\n\n  const checkedTrait = {\n    type: 'checkbox',\n    name: 'checked',\n  };\n\n  const createOption = (value: string, content: string) => {\n    return { type: typeOption, content, attributes: { value } };\n  };\n\n  const checkIfInPreview = (ev: Event) => {\n    if (!editor.Commands.isActive('preview')) {\n      ev.preventDefault();\n    }\n  };\n\n  Components.addType(typeForm, {\n    isComponent: el => el.tagName == 'FORM',\n\n    model: {\n      defaults: {\n        tagName: 'form',\n        droppable: ':not(form)',\n        draggable: ':not(form)',\n        attributes: { method: 'get' },\n        traits: [{\n          type: 'select',\n          name: 'method',\n          options: [\n            {value: 'get', name: 'GET'},\n            {value: 'post', name: 'POST'},\n          ],\n        }, {\n          name: 'action',\n        }],\n      },\n    },\n\n    view: {\n      events: {\n        // The submit of the form might redirect the user from the editor so\n        // we should always prevent the default here.\n        submit: (e: Event) => e.preventDefault(),\n      } as any\n    },\n  });\n\n\n\n\n\n  // INPUT\n  Components.addType(typeInput, {\n    isComponent: el => el.tagName == 'INPUT',\n\n    model: {\n      defaults: {\n        tagName: 'input',\n        droppable: false,\n        highlightable: false,\n        attributes: { type: 'text' },\n        traits: [\n          nameTrait,\n          placeholderTrait,\n          {\n            type: 'select',\n            name: 'type',\n            options: [\n              { value: 'text' },\n              { value: 'email' },\n              { value: 'password' },\n              { value: 'number' },\n            ]\n          },\n          requiredTrait\n        ],\n      },\n    },\n\n    extendFnView: ['updateAttributes'],\n    view: {\n      updateAttributes() {\n        this.el.setAttribute('autocomplete', 'off');\n      },\n    }\n  });\n\n\n\n\n\n  // TEXTAREA\n  Components.addType(typeTextarea, {\n    extend: typeInput,\n    isComponent: el => el.tagName == 'TEXTAREA',\n\n    model: {\n      defaults: {\n        tagName: 'textarea',\n        attributes: {},\n        traits: [\n          nameTrait,\n          placeholderTrait,\n          requiredTrait\n        ]\n      },\n    },\n  });\n\n\n\n\n\n  // OPTION\n  Components.addType(typeOption, {\n    isComponent: el => el.tagName == 'OPTION',\n\n    model: {\n      defaults: {\n        tagName: 'option',\n        layerable: false,\n        droppable: false,\n        draggable: false,\n        highlightable: false,\n      },\n    },\n  });\n\n\n\n\n\n  // SELECT\n  Components.addType(typeSelect, {\n    isComponent: el => el.tagName == 'SELECT',\n\n    model: {\n      defaults: {\n        tagName: 'select',\n        droppable: false,\n        highlightable: false,\n        components: [\n          createOption('opt1', 'Option 1'),\n          createOption('opt2', 'Option 2'),\n        ],\n        traits: [\n          nameTrait,\n          {\n            name: 'options',\n            type: 'select-options'\n          },\n          requiredTrait\n        ],\n      },\n    },\n\n    view: {\n      events: {\n        mousedown: checkIfInPreview,\n      } as any,\n    },\n  });\n\n\n\n\n\n  // CHECKBOX\n  Components.addType(typeCheckbox, {\n    extend: typeInput,\n    isComponent: (el) => el.tagName == 'INPUT' && (el as HTMLInputElement).type == 'checkbox',\n\n    model: {\n      defaults: {\n        copyable: false,\n        attributes: { type: 'checkbox' },\n        traits: [\n          idTrait,\n          nameTrait,\n          valueTrait,\n          requiredTrait,\n          checkedTrait\n        ],\n      },\n    },\n\n    view: {\n      events: {\n        click: checkIfInPreview,\n      } as any,\n\n      init() {\n        this.listenTo(this.model, 'change:attributes:checked', this.handleChecked);\n      },\n\n      handleChecked() {\n        (this.el as any).checked = !!this.model.get('attributes')?.checked;\n      },\n    },\n  });\n\n\n\n\n\n  // RADIO\n  Components.addType(typeRadio, {\n    extend: typeCheckbox,\n    isComponent: el => el.tagName == 'INPUT' && (el as HTMLInputElement).type == 'radio',\n\n    model: {\n      defaults: {\n        attributes: { type: 'radio' },\n      },\n    },\n  });\n\n\n\n\n\n  Components.addType(typeButton, {\n    extend: typeInput,\n    isComponent: el => el.tagName == 'BUTTON',\n\n    model: {\n      defaults: {\n        tagName: 'button',\n        attributes: { type: 'button' },\n        text: 'Send',\n        traits: [\n          {\n            name: 'text',\n            changeProp: true,\n          }, {\n            type: 'select',\n            name: 'type',\n            options: [\n              { value: 'button' },\n              { value: 'submit' },\n              { value: 'reset' },\n            ]\n        }]\n      },\n\n      init() {\n        const comps = this.components();\n        const tChild =  comps.length === 1 && comps.models[0];\n        const chCnt = (tChild && tChild.is('textnode') && tChild.get('content')) || '';\n        const text = chCnt || this.get('text');\n        this.set('text', text);\n        this.on('change:text', this.__onTextChange);\n        (text !== chCnt) && this.__onTextChange();\n      },\n\n      __onTextChange() {\n        this.components(this.get('text'));\n      },\n    },\n\n    view: {\n      events: {\n        click: checkIfInPreview,\n      } as any,\n    },\n  });\n\n\n\n\n\n  // LABEL\n  Components.addType(typeLabel, {\n    extend: 'text',\n    isComponent: el => el.tagName == 'LABEL',\n\n    model: {\n      defaults: {\n        tagName: 'label',\n        components: 'Label' as any,\n        traits: [forTrait],\n      },\n    },\n  });\n}\n","import type { BlockProperties, Plugin } from 'grapesjs';\nimport loadBlocks from './blocks';\nimport loadComponents from './components';\nimport loadTraits from './traits';\n\nexport type PluginOptions = {\n  /**\n   * Which blocks to add.\n   * @default ['form', 'input', 'textarea', 'select', 'button', 'label', 'checkbox', 'radio']\n   */\n   blocks?: string[];\n\n  /**\n   * Category name for blocks.\n   * @default 'Forms'\n   */\n   category?: BlockProperties[\"category\"];\n\n  /**\n   * Add custom block options, based on block id.\n   * @default (blockId) => ({})\n   * @example (blockId) => blockId === 'input' ? { attributes: {...} } : {};\n   */\n   block?: (blockId: string) => ({});\n};\n\nconst plugin: Plugin<PluginOptions> = (editor, opts = {}) => {\n  const config: Required<PluginOptions> = {\n    blocks: ['form', 'input', 'textarea', 'select', 'button', 'label', 'checkbox', 'radio'],\n    category: { id: 'forms', label: 'Forms' },\n    block: () => ({}),\n    ...opts\n  };\n\n  loadComponents(editor);\n  loadTraits(editor);\n  loadBlocks(editor, config);\n};\n\nexport default plugin;\n","import type { Editor } from 'grapesjs';\nimport { typeOption } from './components';\n\nexport default function (editor: Editor) {\n  const trm = editor.TraitManager;\n\n  trm.addType('select-options', {\n    events:{\n      keyup: 'onChange',\n    },\n\n    onValueChange() {\n      const { model, target } = this;\n      const optionsStr = model.get('value').trim();\n      const options = optionsStr.split('\\n');\n      const optComps = [];\n\n      for (let i = 0; i < options.length; i++) {\n        const optionStr = options[i];\n        const option = optionStr.split('::');\n        optComps.push({\n          type: typeOption,\n          components: option[1] || option[0],\n          attributes: { value: option[0] },\n        });\n      }\n\n      target.components().reset(optComps);\n      target.view?.render();\n    },\n\n    getInputEl() {\n      if (!this.$input) {\n        const optionsArr = [];\n        const options = this.target.components();\n\n        for (let i = 0; i < options.length; i++) {\n          const option = options.models[i];\n          const optAttr = option.get('attributes');\n          const optValue = optAttr?.value || '';\n          const optTxtNode = option.components().models[0];\n          const optLabel = optTxtNode && optTxtNode.get('content') || '';\n          optionsArr.push(`${optValue}::${optLabel}`);\n        }\n\n        const el = document.createElement('textarea');\n        el.value = optionsArr.join(\"\\n\");\n        this.$input = el as any;\n      }\n\n      return this.$input;\n  \t},\n  });\n}\n","import type { BlockProperties, Editor } from 'grapesjs';\nimport { PluginOptions } from '.';\nimport {\n  typeButton,\n  typeCheckbox,\n  typeForm,\n  typeInput,\n  typeLabel,\n  typeRadio,\n  typeSelect,\n  typeTextarea,\n} from './components';\n\nexport default function (editor: Editor, opt: Required<PluginOptions>) {\n  const opts = opt;\n  const bm = editor.BlockManager;\n  const addBlock = (id: string, def: BlockProperties) => {\n    opts.blocks?.indexOf(id)! >= 0 && bm.add(id, {\n      ...def,\n      category: opts.category,\n      select: true,\n      ...opt.block(id),\n    });\n  }\n\n  addBlock(typeForm, {\n    label: 'Form',\n    media: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M22 5.5c0-.3-.5-.5-1.3-.5H3.4c-.8 0-1.3.2-1.3.5v3c0 .3.5.5 1.3.5h17.4c.8 0 1.3-.2 1.3-.5v-3zM21 8H3V6h18v2zM22 10.5c0-.3-.5-.5-1.3-.5H3.4c-.8 0-1.3.2-1.3.5v3c0 .3.5.5 1.3.5h17.4c.8 0 1.3-.2 1.3-.5v-3zM21 13H3v-2h18v2z\"/><rect width=\"10\" height=\"3\" x=\"2\" y=\"15\" rx=\".5\"/></svg>',\n    content: {\n      type: typeForm,\n      components: [\n        {\n          components: [\n            { type: typeLabel, components: 'Name' },\n            { type: typeInput },\n          ]\n        }, {\n          components: [\n            { type: typeLabel, components: 'Email' },\n            { type: typeInput, attributes: { type: 'email' } },\n          ]\n        }, {\n          components: [\n            { type: typeLabel, components: 'Gender' },\n            { type: typeCheckbox, attributes: { value: 'M' } },\n            { type: typeLabel, components: 'M' },\n            { type: typeCheckbox, attributes: { value: 'F' } },\n            { type: typeLabel, components: 'F' },\n          ]\n        }, {\n          components: [\n            { type: typeLabel, components: 'Message' },\n            { type: typeTextarea },\n          ]\n        }, {\n          components: [{ type: typeButton }]\n        },\n      ]\n    }\n  });\n\n  addBlock(typeInput, {\n    label: 'Input',\n    media: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M22 9c0-.6-.5-1-1.3-1H3.4C2.5 8 2 8.4 2 9v6c0 .6.5 1 1.3 1h17.4c.8 0 1.3-.4 1.3-1V9zm-1 6H3V9h18v6z\"/><path d=\"M4 10h1v4H4z\"/></svg>',\n    content: { type: typeInput },\n  });\n\n  addBlock(typeTextarea, {\n    label: 'Textarea',\n    media: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M22 7.5c0-.9-.5-1.5-1.3-1.5H3.4C2.5 6 2 6.6 2 7.5v9c0 .9.5 1.5 1.3 1.5h17.4c.8 0 1.3-.6 1.3-1.5v-9zM21 17H3V7h18v10z\"/><path d=\"M4 8h1v4H4zM19 7h1v10h-1zM20 8h1v1h-1zM20 15h1v1h-1z\"/></svg>',\n    content: { type: typeTextarea },\n  });\n\n  addBlock(typeSelect, {\n    label: 'Select',\n    media: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M22 9c0-.6-.5-1-1.3-1H3.4C2.5 8 2 8.4 2 9v6c0 .6.5 1 1.3 1h17.4c.8 0 1.3-.4 1.3-1V9zm-1 6H3V9h18v6z\"/><path d=\"M18.5 13l1.5-2h-3zM4 11.5h11v1H4z\"/></svg>',\n    content: { type: typeSelect },\n  });\n\n  addBlock(typeButton, {\n    label: 'Button',\n    media: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M22 9c0-.6-.5-1-1.3-1H3.4C2.5 8 2 8.4 2 9v6c0 .6.5 1 1.3 1h17.4c.8 0 1.3-.4 1.3-1V9zm-1 6H3V9h18v6z\"/><path d=\"M4 11.5h16v1H4z\"/></svg>',\n    content: { type: typeButton },\n  });\n\n  addBlock(typeLabel, {\n    label: 'Label',\n    media: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M22 11.9c0-.6-.5-.9-1.3-.9H3.4c-.8 0-1.3.3-1.3.9V17c0 .5.5.9 1.3.9h17.4c.8 0 1.3-.4 1.3-.9V12zM21 17H3v-5h18v5z\"/><rect width=\"14\" height=\"5\" x=\"2\" y=\"5\" rx=\".5\"/><path d=\"M4 13h1v3H4z\"/></svg>',\n    content: { type: typeLabel },\n  });\n\n  addBlock(typeCheckbox, {\n    label: 'Checkbox',\n    media: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M10 17l-5-5 1.41-1.42L10 14.17l7.59-7.59L19 8m0-5H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2z\"></path></svg>',\n    content: { type: typeCheckbox },\n  });\n\n  addBlock(typeRadio, {\n    label: 'Radio',\n    media: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8m0-18C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 5c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5z\"></path></svg>',\n    content: { type: typeRadio },\n  });\n}\n"],"names":["root","factory","exports","module","define","amd","globalThis","window","this","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","typeForm","typeInput","typeTextarea","typeSelect","typeCheckbox","typeRadio","typeButton","typeLabel","typeOption","editor","opts","config","blocks","category","id","label","block","Components","nameTrait","name","placeholderTrait","requiredTrait","type","createOption","content","attributes","checkIfInPreview","ev","Commands","isActive","preventDefault","addType","isComponent","el","tagName","model","defaults","droppable","draggable","method","traits","options","view","events","submit","e","highlightable","extendFnView","updateAttributes","setAttribute","extend","layerable","components","mousedown","copyable","click","init","listenTo","handleChecked","checked","text","changeProp","comps","tChild","length","models","chCnt","is","set","on","__onTextChange","TraitManager","keyup","onValueChange","target","trim","split","optComps","i","option","push","reset","render","getInputEl","$input","optionsArr","optAttr","optValue","optTxtNode","optLabel","document","createElement","join","opt","bm","BlockManager","addBlock","def","indexOf","add","select","media"],"sourceRoot":""}